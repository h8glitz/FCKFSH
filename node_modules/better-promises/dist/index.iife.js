var betterPromises=function(c){"use strict";var H=Object.defineProperty;var J=(c,a,f)=>a in c?H(c,a,{enumerable:!0,configurable:!0,writable:!0,value:f}):c[a]=f;var T=(c,a,f)=>J(c,typeof a!="symbol"?a+"":a,f);function a(n){return o=>o instanceof n}function f(n,o){o||(o=[]);class e extends Error{constructor(...r){const s=typeof o=="function"?o(...r):typeof o=="string"?[o]:o||[];super(...s),this.name=n}}return Object.defineProperty(e,"name",{value:n}),[e,a(e)]}const[C,$]=f("CancelledError","Promise was canceled"),[S,k]=f("TimeoutError",(n,o)=>[`Timeout reached: ${n}ms`,{cause:o}]),L=Symbol("Resolved");function g(n){return Array.isArray(n)&&n[0]===L}function q(n){return[L,n]}function P(n,o){return n.reject=o.reject,n.abort=o.abort,n}class m extends Promise{constructor(e,i){let r,s;super((l,u)=>{let y,h;typeof e=="function"?(y=e,h=i):h=e;const p=[],M=t=>(...b)=>{const R=t(...b);return p.forEach(G=>G()),R},B=new AbortController,{signal:d}=B;s=t=>{!d.aborted&&B.abort(t)};const E=()=>d.reason,j=t=>{const b=()=>{t(E())};d.addEventListener("abort",b,!0);const R=()=>{d.removeEventListener("abort",b,!0)};return p.push(R),R},z=M(t=>{l(t),s(q(t))});r=M(t=>{u(t),s(t)}),h||(h={});const{abortSignal:v,rejectOnAbort:D=!0}=h;if(v)if(v.aborted){const{reason:t}=v;if(D)return r(t);s(t)}else{const t=()=>{s(v.reason)};v.addEventListener("abort",t),p.push(()=>{v.removeEventListener("abort",t)})}D&&j(u);const{timeout:A}=h;if(A){const t=setTimeout(()=>{s(new S(A))},A);p.push(()=>{clearTimeout(t)})}const F=()=>d.aborted,V=()=>g(E()),Y=()=>{const t=E();return g(t)?t[1]:void 0};try{const t=y&&y(z,r,{abortReason:E,abortSignal:d,isAborted:F,isResolved:V,onAborted:j,onResolved:b=>j(()=>{V()&&b(Y())}),resolved:Y,throwIfAborted(){if(F())throw E()}});t instanceof Promise&&t.catch(r)}catch(t){r(t)}});T(this,"abort");T(this,"reject");this.abort=s,this.reject=r}static fn(e,i){return new m(async(r,s,l)=>{try{r(await e(l))}catch(u){s(u)}},i)}static resolve(e){return this.fn(()=>e)}static reject(e){return new m((i,r)=>{r(e)})}cancel(){this.abort(new C)}catch(e){return this.then(void 0,e)}finally(e){return P(super.finally(e),this)}then(e,i){return P(super.then(e,i),this)}}function I(n,o){return n.resolve=o.resolve,n}class w extends m{constructor(e,i){let r,s;typeof e=="function"?(r=e,s=i):s=e;let l;super((u,y,h)=>{l=u,r&&r(u,y,h)},s);T(this,"resolve");this.resolve=l}static fn(e,i){return new w((r,s,l)=>{try{Promise.resolve(e(l)).then(r,s)}catch(u){s(u)}},i)}static resolve(e){return this.fn(()=>e)}static reject(e){return new w((i,r)=>{r(e)})}catch(e){return this.then(void 0,e)}finally(e){return I(super.finally(e),this)}then(e,i){return I(super.then(e,i),this)}}return c.AbortablePromise=m,c.CancelledError=C,c.ManualPromise=w,c.TimeoutError=S,c.isCancelledError=$,c.isPromiseResolveResult=g,c.isTimeoutError=k,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c}({});
//# sourceMappingURL=index.iife.js.map
