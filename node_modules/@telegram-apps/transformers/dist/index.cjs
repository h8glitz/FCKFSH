"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});var b;function W(e){return{lang:(e==null?void 0:e.lang)??(b==null?void 0:b.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(b==null?void 0:b.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(b==null?void 0:b.abortPipeEarly)}}var E;function le(e){return E==null?void 0:E.get(e)}var C;function pe(e){return C==null?void 0:C.get(e)}var Q;function fe(e,n){var r;return(r=Q==null?void 0:Q.get(e))==null?void 0:r.get(n)}function ye(e){var r,t;const n=typeof e;return n==="string"?`"${e}"`:n==="number"||n==="bigint"||n==="boolean"?`${e}`:n==="object"||n==="function"?(e&&((t=(r=Object.getPrototypeOf(e))==null?void 0:r.constructor)==null?void 0:t.name))??"null":n}function f(e,n,r,t,s){const u=s&&"input"in s?s.input:r.value,i=(s==null?void 0:s.expected)??e.expects??null,l=(s==null?void 0:s.received)??ye(u),c={kind:e.kind,type:e.type,input:u,expected:i,received:l,message:`Invalid ${n}: ${i?`Expected ${i} but r`:"R"}eceived ${l}`,requirement:e.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:t.lang,abortEarly:t.abortEarly,abortPipeEarly:t.abortPipeEarly},y=e.kind==="schema",p=(s==null?void 0:s.message)??e.message??fe(e.reference,c.lang)??(y?pe(c.lang):null)??t.message??le(c.lang);p&&(c.message=typeof p=="function"?p(c):p),y&&(r.typed=!1),r.issues?r.issues.push(c):r.issues=[c]}function m(e){return{version:1,vendor:"valibot",validate(n){return e["~run"]({value:n},W())}}}function B(e,n){return Object.hasOwn(e,n)&&n!=="__proto__"&&n!=="prototype"&&n!=="constructor"}function me(e,n){const r=[...new Set(e)];return r.length>1?`(${r.join(` ${n} `)})`:r[0]??"never"}var he=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function M(e,n){return{kind:"validation",type:"check",reference:M,async:!1,expects:null,requirement:e,message:n,"~run"(r,t){return r.typed&&!this.requirement(r.value)&&f(this,"input",r,t),r}}}function V(e){return{kind:"validation",type:"integer",reference:V,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&f(this,"integer",n,r),n}}}function d(e){return{kind:"transformation",type:"transform",reference:d,async:!1,operation:e,"~run"(n){return n.value=this.operation(n.value),n}}}function q(e,n,r){return typeof e.default=="function"?e.default(n,r):e.default}function be(e,n){return!e["~run"]({value:n},{abortEarly:!0}).issues}function k(e){return{kind:"schema",type:"boolean",reference:k,expects:"boolean",async:!1,message:e,get"~standard"(){return m(this)},"~run"(n,r){return typeof n.value=="boolean"?n.typed=!0:f(this,"type",n,r),n}}}function T(e){return{kind:"schema",type:"date",reference:T,expects:"Date",async:!1,message:e,get"~standard"(){return m(this)},"~run"(n,r){return n.value instanceof Date?isNaN(n.value)?f(this,"type",n,r,{received:'"Invalid Date"'}):n.typed=!0:f(this,"type",n,r),n}}}function K(e,n){return{kind:"schema",type:"instance",reference:K,expects:e.name,async:!1,class:e,message:n,get"~standard"(){return m(this)},"~run"(r,t){return r.value instanceof this.class?r.typed=!0:f(this,"type",r,t),r}}}function w(e){return{kind:"schema",type:"lazy",reference:w,expects:"unknown",async:!1,getter:e,get"~standard"(){return m(this)},"~run"(n,r){return this.getter(n.value)["~run"](n,r)}}}function S(e,n){return{kind:"schema",type:"loose_object",reference:S,expects:"Object",async:!1,entries:e,message:n,get"~standard"(){return m(this)},"~run"(r,t){var u;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(const i in this.entries){const l=this.entries[i];if(i in s||(l.type==="exact_optional"||l.type==="optional"||l.type==="nullish")&&l.default!==void 0){const c=i in s?s[i]:q(l),y=l["~run"]({value:c},t);if(y.issues){const p={type:"object",origin:"value",input:s,key:i,value:c};for(const h of y.issues)h.path?h.path.unshift(p):h.path=[p],(u=r.issues)==null||u.push(h);if(r.issues||(r.issues=y.issues),t.abortEarly){r.typed=!1;break}}y.typed||(r.typed=!1),r.value[i]=y.value}else if(l.type!=="exact_optional"&&l.type!=="optional"&&l.type!=="nullish"&&(f(this,"key",r,t,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:s,key:i,value:s[i]}]}),t.abortEarly))break}if(!r.issues||!t.abortEarly)for(const i in s)B(s,i)&&!(i in this.entries)&&(r.value[i]=s[i])}else f(this,"type",r,t);return r}}}function x(e){return{kind:"schema",type:"number",reference:x,expects:"number",async:!1,message:e,get"~standard"(){return m(this)},"~run"(n,r){return typeof n.value=="number"&&!isNaN(n.value)?n.typed=!0:f(this,"type",n,r),n}}}function o(e,n){return{kind:"schema",type:"optional",reference:o,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:n,get"~standard"(){return m(this)},"~run"(r,t){return r.value===void 0&&(this.default!==void 0&&(r.value=q(this,r,t)),r.value===void 0)?(r.typed=!0,r):this.wrapped["~run"](r,t)}}}function F(e,n,r){return{kind:"schema",type:"record",reference:F,expects:"Object",async:!1,key:e,value:n,message:r,get"~standard"(){return m(this)},"~run"(t,s){var i,l;const u=t.value;if(u&&typeof u=="object"){t.typed=!0,t.value={};for(const c in u)if(B(u,c)){const y=u[c],p=this.key["~run"]({value:c},s);if(p.issues){const _={type:"object",origin:"key",input:u,key:c,value:y};for(const g of p.issues)g.path=[_],(i=t.issues)==null||i.push(g);if(t.issues||(t.issues=p.issues),s.abortEarly){t.typed=!1;break}}const h=this.value["~run"]({value:y},s);if(h.issues){const _={type:"object",origin:"value",input:u,key:c,value:y};for(const g of h.issues)g.path?g.path.unshift(_):g.path=[_],(l=t.issues)==null||l.push(g);if(t.issues||(t.issues=h.issues),s.abortEarly){t.typed=!1;break}}(!p.typed||!h.typed)&&(t.typed=!1),p.typed&&(t.value[p.value]=h.value)}}else f(this,"type",t,s);return t}}}function a(e){return{kind:"schema",type:"string",reference:a,expects:"string",async:!1,message:e,get"~standard"(){return m(this)},"~run"(n,r){return typeof n.value=="string"?n.typed=!0:f(this,"type",n,r),n}}}function z(e){let n;if(e)for(const r of e)n?n.push(...r.issues):n=r.issues;return n}function H(e,n){return{kind:"schema",type:"union",reference:H,expects:me(e.map(r=>r.expects),"|"),async:!1,options:e,message:n,get"~standard"(){return m(this)},"~run"(r,t){let s,u,i;for(const l of this.options){const c=l["~run"]({value:r.value},t);if(c.typed)if(c.issues)u?u.push(c):u=[c];else{s=c;break}else i?i.push(c):i=[c]}if(s)return s;if(u){if(u.length===1)return u[0];f(this,"type",r,t,{issues:z(u)}),r.typed=!0}else{if((i==null?void 0:i.length)===1)return i[0];f(this,"type",r,t,{issues:z(i)})}return r}}}function X(){return{kind:"schema",type:"unknown",reference:X,expects:"unknown",async:!1,get"~standard"(){return m(this)},"~run"(e){return e.typed=!0,e}}}function Y(e,n,r){const t=e["~run"]({value:n},W(r));if(t.issues)throw new he(t.issues);return t.value}function v(...e){return{...e[0],pipe:e,get"~standard"(){return m(this)},"~run"(n,r){for(const t of e)if(t.kind!=="metadata"){if(n.issues&&(t.kind==="schema"||t.kind==="transformation")){n.typed=!1;break}(!n.issues||!r.abortEarly&&!r.abortPipeEarly)&&(n=t["~run"](n,r))}return n}}}function de(e){return e.replace(/_[a-z]/g,n=>n[1].toUpperCase())}function ve(e){return Object.entries(e).reduce((n,[r,t])=>(n[de(r)]=t,n),{})}function I(e){const n=ve(e);for(const r in n){const t=n[r];t&&typeof t=="object"&&!(t instanceof Date)&&(n[r]=Array.isArray(t)?t.map(I):I(t))}return n}function D(e){return d(n=>e?I(n):n)}function A(e){return n=>v(e,D(n))}function G(e){return(n,r)=>Y(v(e,D(r)),n)}function Z(){return d(JSON.parse)}function P(e){const n=A(e);return r=>v(a(),Z(),n(r))}function ee(e){return d(n=>{const r={};return new URLSearchParams(n).forEach((t,s)=>{const u=r[s];Array.isArray(u)?u.push(t):u===void 0?r[s]=t:r[s]=[u,t]}),Y(e,r)})}function $(e){return n=>v(H([a(),K(URLSearchParams)]),ee(e),D(n))}const J=o(w(()=>ie())),ne=S({id:x(),photo_url:o(a()),type:a(),title:a(),username:o(a())}),re=S({added_to_attachment_menu:o(k()),allows_write_to_pm:o(k()),first_name:a(),id:x(),is_bot:o(k()),is_premium:o(k()),last_name:o(a()),language_code:o(a()),photo_url:o(a()),username:o(a())}),te=S({auth_date:v(a(),d(e=>new Date(Number(e)*1e3)),T()),can_send_after:o(v(a(),d(Number),V())),chat:o(w(()=>se())),chat_type:o(a()),chat_instance:o(a()),hash:a(),query_id:o(a()),receiver:J,start_param:o(a()),signature:a(),user:J}),se=P(ne),ie=P(re),O=$(te);function L(e){return/^#[\da-f]{6}$/i.test(e)}function ue(e){return/^#[\da-f]{3}$/i.test(e)}function ge(e){const n=e.replace(/\s/g,"").toLowerCase();if(L(n))return n;if(ue(n)){let t="#";for(let s=0;s<3;s+=1)t+=n[1+s].repeat(2);return t}const r=n.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||n.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!r)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return r.slice(1).reduce((t,s)=>t+parseInt(s,10).toString(16).padStart(2,"0"),"#")}const ae=A(F(a(),v(a(),M(L),d(e=>e)))),j=o(v(a(),d(e=>e==="1"))),N=P(ae()),ce=S({tgWebAppBotInline:j,tgWebAppData:o(O()),tgWebAppDefaultColors:o(N()),tgWebAppFullscreen:j,tgWebAppPlatform:a(),tgWebAppShowSettings:j,tgWebAppStartParam:o(a()),tgWebAppThemeParams:N(),tgWebAppVersion:a()}),R=$(ce),Se=G(O()),ke=G(R()),_e=S({eventType:a(),eventData:o(X())});function U(e,n){return n||(n=(r,t)=>JSON.stringify(t)),new URLSearchParams(Object.entries(e).reduce((r,[t,s])=>(Array.isArray(s)?r.push(...s.map(u=>[t,String(u)])):s!=null&&r.push([t,s instanceof Date?(s.getTime()/1e3|0).toString():typeof s=="string"||typeof s=="number"?String(s):typeof s=="boolean"?s?"1":"0":n(t,s)]),r),[])).toString()}function oe(e){return U(e)}function De(e){return U(e,(n,r)=>n==="tgWebAppData"?oe(r):JSON.stringify(r))}function Pe(e){try{return be(R(),e)}catch{return!1}}exports.InitDataChatSchema=ne;exports.InitDataQuerySchema=te;exports.InitDataUserSchema=re;exports.LaunchParamsSchema=ce;exports.MiniAppsMessageSchema=_e;exports.conditionalSnakeKeys=D;exports.createCamelCaseGen=A;exports.createCamelCaseSchemaParserGen=G;exports.createJsonCamelCaseGen=P;exports.createQueryCamelCaseGen=$;exports.initDataChatJson=se;exports.initDataQuery=O;exports.initDataUserJson=ie;exports.isLaunchParamsQuery=Pe;exports.isRGB=L;exports.isRGBShort=ue;exports.jsonParse=Z;exports.launchParamsQuery=R;exports.parseInitDataQuery=Se;exports.parseLaunchParamsQuery=ke;exports.serializeInitDataQuery=oe;exports.serializeLaunchParamsQuery=De;exports.serializeToQuery=U;exports.themeParams=ae;exports.toRGB=ge;exports.transformQueryUsing=ee;
//# sourceMappingURL=index.cjs.map
