{"version":3,"file":"index.iife.js","sources":["../src/isErrorOfKind.ts","../src/errorClass.ts","../src/errorClassWithData.ts"],"sourcesContent":["export type IsErrorOfKindFn<Err> = (value: unknown) => value is Err;\r\n\r\n/**\r\n * Creates a predicate function returning true if the passed value is an instance of the\r\n * specified class.\r\n * @param ErrorClass\r\n */\r\nexport function isErrorOfKind<Err>(\r\n  ErrorClass: { new(...args: any[]): Err }\r\n): IsErrorOfKindFn<Err> {\r\n  return (value): value is Err => value instanceof ErrorClass;\r\n}","import { isErrorOfKind, type IsErrorOfKindFn } from './isErrorOfKind.js';\r\n\r\nexport type ToSuperFn<ConstructorArgs extends any[]> =\r\n  (...args: ConstructorArgs) => Parameters<ErrorConstructor>;\r\n\r\nexport type ToSuperType<ConstructorArgs extends any[]> =\r\n  | ToSuperFn<ConstructorArgs>\r\n  | string\r\n  | Parameters<ErrorConstructor>\r\n\r\nexport interface CustomErrorClass<ConstructorArgs extends any[]> {\r\n  new(...args: ConstructorArgs): Error;\r\n}\r\n\r\n/**\r\n * @return A new error class with a predefined name.\r\n * @param name - error class name\r\n * @param toSuper - a function converting passed arguments to a list of arguments passed to\r\n * the `Error` constructor. It can also be a message or a list of arguments passed to the\r\n * super constructor.\r\n */\r\nexport function errorClass<ConstructorArgs extends any[] = []>(\r\n  name: string,\r\n  toSuper?: ToSuperType<ConstructorArgs>,\r\n): [\r\n  ErrorClass: CustomErrorClass<ConstructorArgs>,\r\n  isInstanceOfErrorClass: IsErrorOfKindFn<Error>,\r\n] {\r\n  toSuper ||= [];\r\n\r\n  class CustomError extends Error {\r\n    constructor(...args: ConstructorArgs) {\r\n      const params = typeof toSuper === 'function'\r\n        ? toSuper(...args)\r\n        : typeof toSuper === 'string'\r\n          ? [toSuper] as [string]\r\n          : toSuper || [];\r\n      super(...params);\r\n      this.name = name;\r\n    }\r\n  }\r\n\r\n  Object.defineProperty(CustomError, 'name', { value: name });\r\n\r\n  return [CustomError, isErrorOfKind(CustomError)];\r\n}\r\n","import { errorClass, type ToSuperType } from './errorClass.js';\r\nimport { isErrorOfKind, type IsErrorOfKindFn } from './isErrorOfKind.js';\r\n\r\nexport type ToDataFn<ConstructorArgs extends any[], Data> = (...args: ConstructorArgs) => Data;\r\n\r\nexport interface CustomErrorWithData<Data> extends Error {\r\n  data: Data;\r\n}\r\n\r\nexport interface ErrorClassWithData<Data, ConstructorArgs extends any[]> {\r\n  name: string;\r\n  new(...args: ConstructorArgs): CustomErrorWithData<Data>;\r\n}\r\n\r\n/**\r\n * @returns A new error class with a predefined name and data type.\r\n * @param name - error name\r\n * @param toData - function converting constructor arguments to data\r\n * @param toSuper - a function converting passed arguments to a list of arguments passed to\r\n * the `Error` constructor. It can also be a message or a list of arguments passed to the\r\n * super constructor.\r\n */\r\nexport function errorClassWithData<Data, ConstructorArgs extends any[] = []>(\r\n  name: string,\r\n  toData: ToDataFn<ConstructorArgs, Data>,\r\n  toSuper?: ToSuperType<ConstructorArgs>,\r\n): [\r\n  ErrorClass: ErrorClassWithData<Data, ConstructorArgs>,\r\n  isInstanceOfErrorClass: IsErrorOfKindFn<CustomErrorWithData<Data>>,\r\n] {\r\n  class CustomError extends errorClass(name, toSuper)[0] {\r\n    data: Data;\r\n\r\n    constructor(...args: ConstructorArgs) {\r\n      super(...args);\r\n      this.data = toData(...args);\r\n    }\r\n  }\r\n\r\n  Object.defineProperty(CustomError, 'name', { value: name });\r\n\r\n  return [CustomError, isErrorOfKind(CustomError)];\r\n}\r\n"],"names":["isErrorOfKind","ErrorClass","value","errorClass","name","toSuper","CustomError","args","params","errorClassWithData","toData","__publicField"],"mappings":"0MAOO,SAASA,EACdC,EACsB,CACf,OAACC,GAAwBA,aAAiBD,CACnD,CCUgB,SAAAE,EACdC,EACAC,EAIA,CACAA,MAAY,CAAA,GAEZ,MAAMC,UAAoB,KAAM,CAC9B,eAAeC,EAAuB,CACpC,MAAMC,EAAS,OAAOH,GAAY,WAC9BA,EAAQ,GAAGE,CAAI,EACf,OAAOF,GAAY,SACjB,CAACA,CAAO,EACRA,GAAW,CAAA,EACjB,MAAM,GAAGG,CAAM,EACf,KAAK,KAAOJ,CACd,CACF,CAEA,cAAO,eAAeE,EAAa,OAAQ,CAAE,MAAOF,EAAM,EAEnD,CAACE,EAAaN,EAAcM,CAAW,CAAC,CACjD,CCvBgB,SAAAG,EACdL,EACAM,EACAL,EAIA,CACA,MAAMC,UAAoBH,EAAWC,EAAMC,CAAO,EAAE,CAAC,CAAE,CAGrD,eAAeE,EAAuB,CACpC,MAAM,GAAGA,CAAI,EAHfI,EAAA,aAIO,KAAA,KAAOD,EAAO,GAAGH,CAAI,CAC5B,CACF,CAEA,cAAO,eAAeD,EAAa,OAAQ,CAAE,MAAOF,EAAM,EAEnD,CAACE,EAAaN,EAAcM,CAAW,CAAC,CACjD"}